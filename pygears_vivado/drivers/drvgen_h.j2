#ifndef {{module_name.upper()}}_H
#define {{module_name.upper()}}_H

#include "xil_types.h"
#include "xaxidma.h"

/*
    Autogenerated driver for {{module_name}} module, configuring type:
    {{repr(cmd_type)}}
*/

struct {{module_name}}_cfg{
    XAxiDma_Config dma_cfg;
    XAxiDma dma;
};

int {{module_name}}_init(struct {{module_name}}_cfg* cfg, u32 base_address);

u32* {{module_name}}_cmd_new(struct {{module_name}}_cfg* cfg);
u32* {{module_name}}_dout_new(struct {{module_name}}_cfg* cfg, u32 size);

int {{module_name}}_receive(struct {{module_name}}_cfg* cfg, u32* data);
int {{module_name}}_send(struct {{module_name}}_cfg* cfg, const u32* cmd);
int {{module_name}}_call(struct {{module_name}}_cfg* cfg, u32* cmd, u32* data, u32 max_size);

{% for r in regs -%}
void set_{{module_name}}_{{r['path']}}(u32* cmd, void* vptr);
{% if r['width'] <= 32 -%}
void uset_{{module_name}}_{{r['path']}}(u32* cmd, u32 val);
u32 uget_{{module_name}}_{{r['path']}}(u32* cmd);
{% endif %}

{% endfor %}

#endif
